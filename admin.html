<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂±‡∑ö‡∂≠‡∑ä‚Äç‡∂ª‡∑è - Admin Panel</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #fffbf2; padding: 20px; color: #333; }
        .admin-box { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border-top: 8px solid #d35400; }
        h2 { color: #d35400; text-align: center; }
        input, textarea { width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 12px; border: 1px solid #ddd; box-sizing: border-box; font-size: 16px; }
        textarea { height: 250px; }
        .btn-upload { background: #d35400; color: white; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 18px; }
        
        .article-list { margin-top: 40px; border-top: 2px solid #eee; padding-top: 20px; }
        .article-item { background: #f9f9f9; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #eee; }
        .article-info { flex: 1; }
        .article-info b { color: #d35400; display: block; margin-bottom: 5px; }
        .btn-delete { background: #e74c3c; color: white; border: none; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        #status-msg { text-align: center; font-weight: bold; margin-top: 15px; }
    </style>
</head>
<body>

    <div class="admin-box">
        <h2>‚úçÔ∏è ‡∂±‡∑Ä ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</h2>
        <input type="text" id="article-title" placeholder="‡∂Ω‡∑í‡∂¥‡∑í‡∂∫‡∑ö ‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è‡∑Ä ‡∂∏‡∑ô‡∂≠‡∑ê‡∂± ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±...">
        <textarea id="article-content" placeholder="‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±‡∂ß ‡∂¥‡∑ö‡∑É‡∑ä‡∂ß‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±..."></textarea>
        <button class="btn-upload" onclick="uploadToFirebase()">‡∂á‡∂¥‡∑ä ‡∂ë‡∂ö‡∂ß ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (Upload)</button>
        <p id="status-msg"></p>

        <div class="article-list">
            <h3>üìö ‡∂Ø‡∑ê‡∂±‡∂ß ‡∂á‡∂¥‡∑ä ‡∂ë‡∂ö‡∑ö ‡∂á‡∂≠‡∑í ‡∂Ω‡∑í‡∂¥‡∑í</h3>
            <div id="display-list">‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</div>
        </div>
    </div>

    <script>
        // ‡∂î‡∂∂ ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö‡∂ú‡∑ö Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyDEiwhtAIdoqdMIV5n_bdDoKuIrCkjqr3M",
            authDomain: "dharma-nethra.firebaseapp.com",
            databaseURL: "https://dharma-nethra-default-rtdb.firebaseio.com",
            projectId: "dharma-nethra",
            storageBucket: "dharma-nethra.firebasestorage.app",
            messagingSenderId: "365410669829",
            appId: "1:365410669829:web:d9a9465ed1f1f2b792936c"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ Upload ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏
        function uploadToFirebase() {
            const title = document.getElementById('article-title').value;
            const content = document.getElementById('article-content').value;
            const status = document.getElementById('status-msg');

            if (title && content) {
                db.ref('articles').push({
                    title: title,
                    content: content,
                    timestamp: Date.now()
                }).then(() => {
                    status.style.color = "green";
                    status.innerText = "‚úÖ ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑Ö‡∑è!";
                    document.getElementById('article-title').value = "";
                    document.getElementById('article-content').value = "";
                });
            } else {
                alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è‡∑Ä ‡∑É‡∑Ñ ‡∂Ö‡∂±‡∑ä‡∂≠‡∂ª‡∑ä‡∂ú‡∂≠‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.");
            }
        }

        // ‡∂Ω‡∑í‡∂¥‡∑í ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
        db.ref('articles').on('value', (snapshot) => {
            const listDiv = document.getElementById('display-list');
            listDiv.innerHTML = '';
            if (snapshot.exists()) {
                snapshot.forEach((child) => {
                    const data = child.val();
                    const id = child.key;
                    listDiv.innerHTML += `
                        <div class="article-item">
                            <div class="article-info">
                                <b>${data.title}</b>
                                <small>${data.content.substring(0, 50)}...</small>
                            </div>
                            <button class="btn-delete" onclick="deleteArticle('${id}')">‡∂∏‡∂ö‡∑è ‡∂Ø‡∂∏‡∂±‡∑ä‡∂±</button>
                        </div>
                    `;
                });
            } else {
                listDiv.innerHTML = '‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂Ω‡∑í‡∂¥‡∑í ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª ‡∂±‡∑ê‡∂≠.';
            }
        });

        // ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫‡∂ö‡∑ä ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑ì‡∂∏
        function deleteArticle(id) {
            if (confirm("‡∂î‡∂∂‡∂ß ‡∑Ä‡∑í‡∑Å‡∑ä‡∑Ä‡∑è‡∑É‡∂Ø ‡∂∏‡∑ô‡∂∏ ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂∂‡∑Ä?")) {
                db.ref('articles/' + id).remove().then(() => {
                    alert("‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑î‡∑Ä‡∑è.");
                });
            }
        }
    </script>
</body>
</html>