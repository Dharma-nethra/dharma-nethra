<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dharma Nethra - Admin</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: sans-serif; background: #fffbf2; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: #d35400; color: #fff; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .list-item { background: #f9f9f9; padding: 10px; margin-top: 10px; border-radius: 8px; display: flex; justify-content: space-between; border: 1px solid #eee; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color:#d35400; text-align:center;">‡∑É‡∂Ø‡∑Ñ‡∂∏‡∑ä ‡∂Ω‡∑í‡∂¥‡∑í ‡∂ö‡∑Ö‡∂∏‡∂±‡∑è‡∂ö‡∂ª‡∂´‡∂∫</h2>
    <input type="text" id="t" placeholder="‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è‡∑Ä...">
    <textarea id="c" rows="8" placeholder="‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±‡∂ß ‡∂¥‡∑ö‡∑É‡∑ä‡∂ß‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±..."></textarea>
    <button onclick="save()">‡∂á‡∂¥‡∑ä ‡∂ë‡∂ö‡∂ß ‡∂ë‡∂ö‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂± (Upload)</button>
    <p id="msg" style="text-align:center; font-weight:bold;"></p>

    <hr>
    <h3>üìö ‡∂Ø‡∑ê‡∂±‡∂ß ‡∂á‡∂≠‡∑í ‡∂Ω‡∑í‡∂¥‡∑í ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä</h3>
    <div id="article-list">‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</div>
</div>

<script>
    // ‡∂î‡∂∂ ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö‡∂ú‡∑ö ‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyDEiwhtAIdoqdMIV5n_bdDoKuIrCkjqr3M",
        authDomain: "dharma-nethra.firebaseapp.com",
        databaseURL: "https://dharma-nethra-default-rtdb.firebaseio.com",
        projectId: "dharma-nethra",
        storageBucket: "dharma-nethra.firebasestorage.app",
        messagingSenderId: "365410669829",
        appId: "1:365410669829:web:d9a9465ed1f1f2b792936c"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∑É‡∑î‡∂ª‡∑ê‡∂ö‡∑ì‡∂∏
    function save() {
        const title = document.getElementById('t').value;
        const content = document.getElementById('c').value;
        const msg = document.getElementById('msg');

        if(title && content) {
            db.ref('articles').push({
                title: title,
                content: content,
                time: Date.now()
            }).then(() => {
                msg.style.color = "green";
                msg.innerText = "‚úÖ ‡∑É‡∑è‡∂ª‡∑ä‡∂Æ‡∂ö‡∑Ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∑Ö‡∑è!";
                document.getElementById('t').value = "";
                document.getElementById('c').value = "";
            }).catch(err => {
                msg.style.color = "red";
                msg.innerText = "‚ùå ‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä: " + err.message;
            });
        } else { alert("‡∂ö‡∂ª‡∑î‡∂´‡∑è‡∂ö‡∂ª ‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω ‡∂¥‡∑î‡∂ª‡∑Ä‡∂±‡∑ä‡∂±."); }
    }

    // ‡∂Ω‡∑í‡∂¥‡∑í ‡∂Ω‡∑ê‡∂∫‡∑í‡∑É‡∑ä‡∂≠‡∑î‡∑Ä ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∑ì‡∂∏
    db.ref('articles').on('value', (snap) => {
        const list = document.getElementById('article-list');
        list.innerHTML = '';
        if(snap.exists()) {
            snap.forEach(child => {
                const a = child.val();
                list.innerHTML += `
                    <div class="list-item">
                        <span><b>${a.title}</b></span>
                        <button onclick="del('${child.key}')" style="background:#e74c3c; color:white; border:none; padding:5px 10px; border-radius:5px;">‡∂∏‡∂ö‡∂±‡∑ä‡∂±</button>
                    </div>
                `;
            });
        } else { list.innerHTML = "‡∂≠‡∑Ä‡∂∏‡∂≠‡∑ä ‡∂Ω‡∑í‡∂¥‡∑í ‡∂ö‡∑í‡∑É‡∑í‡∑Ä‡∂ö‡∑ä ‡∂±‡∑ê‡∂≠."; }
    }, err => {
        document.getElementById('article-list').innerText = "‡∂Ø‡∑ù‡∑Ç‡∂∫‡∂ö‡∑ä: " + err.message;
    });

    function del(id) {
        if(confirm("‡∂∏‡∑ô‡∂∏ ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂∏‡∂ö‡∑è ‡∂Ø‡∑ê‡∂∏‡∑ì‡∂∏‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫‡∂Ø?")) {
            db.ref('articles/' + id).remove();
        }
    }
</script>

</body>
</html>