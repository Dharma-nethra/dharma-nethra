<!DOCTYPE html>
<html lang="si">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂±‡∑ö‡∂≠‡∑ä‚Äç‡∂ª‡∑è - Dharma Nethra</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;600;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <style>
        :root {
            --primary: #d35400; --secondary: #f39c12; --accent: #8e44ad; --success: #27ae60; --danger: #e74c3c;
            --bg: #fffbf5; --card: #ffffff; --text: #333333; --shadow: 0 4px 20px rgba(0,0,0,0.05);
            --header-bg: linear-gradient(135deg, #f39c12, #d35400); --header-text: #ffffff;
            --stroke-color: linear-gradient(45deg, #f39c12, #d35400, #8e44ad);
        }
        .dark-mode {
            --bg: #121212; --text: #e0e0e0; --card: #1e1e1e; --shadow: 0 8px 30px rgba(0,0,0,0.3);
            --header-bg: linear-gradient(135deg, #a04000, #7f2f00);
            --stroke-color: linear-gradient(45deg, #a04000, #d35400, #6c3483);
        }
        
        * { user-select: none; box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'Noto Sans Sinhala', 'Poppins', sans-serif; }
        body { background-color: var(--bg); color: var(--text); transition: 0.4s ease; margin: 0; padding-bottom: 90px; }
        
        /* --- Premium Header --- */
        .header { 
            background: var(--header-bg); padding: 15px 20px; display: flex; align-items: center; justify-content: space-between; 
            color: var(--header-text); position: sticky; top: 0; z-index: 100; box-shadow: var(--shadow);
            border-bottom-left-radius: 20px; border-bottom-right-radius: 20px;
        }
        .header-left { display: flex; align-items: center; }
        .lotus-icon { width: 35px; height: 35px; margin-right: 10px; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2)); }
        .app-title { font-size: 22px; font-weight: 700; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .header-icons span { font-size: 22px; margin-left: 15px; cursor: pointer; transition: 0.3s; }
        .header-icons span:active { transform: scale(0.9); }

        .date-strip { 
            background: var(--card); color: var(--primary); text-align: center; padding: 8px; font-size: 13px; font-weight: 600; 
            margin: 10px auto; width: 90%; border-radius: 15px; box-shadow: var(--shadow); border: 1px solid rgba(211, 84, 0, 0.1);
        }
        
        .container { padding: 10px 15px; max-width: 700px; margin: auto; }
        
        /* --- Vibrant Article Cards with Stroke --- */
        .article-card { 
            background: var(--card); padding: 20px; border-radius: 20px; margin-bottom: 18px; 
            box-shadow: var(--shadow); position: relative; overflow: hidden; z-index: 1;
        }
        .article-card::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 20px; padding: 2px; /* Stroke width */
            background: var(--stroke-color); 
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor; mask-composite: exclude; z-index: -1;
        }
        .title { font-size: 19px; font-weight: 700; color: var(--primary); margin-bottom: 8px; display: flex; align-items: center; }
        .title::before { content: '‚ò∏'; color: var(--secondary); margin-right: 10px; font-size: 16px; }
        .snippet { font-size: 15px; line-height: 1.5; opacity: 0.8; }
        .read-badge { position: absolute; top: 15px; right: 15px; background: var(--success); color: white; font-size: 10px; padding: 4px 10px; border-radius: 12px; }

        /* --- Buttons & Controls --- */
        .btn { border: none; padding: 12px 24px; border-radius: 30px; cursor: pointer; font-weight: 600; margin: 5px; background: var(--primary); color: white; transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.1); font-size: 14px; }
        .btn:active { transform: scale(0.95); }
        .btn-wa { background: var(--success); } .btn-dark { background: #34495e; } .btn-danger { background: var(--danger); }
        
        /* --- Bottom Nav --- */
        .bottom-nav { 
            position: fixed; bottom: 0; width: 100%; background: var(--card); display: flex; 
            justify-content: space-around; padding: 10px 0; border-top-left-radius: 25px; border-top-right-radius: 25px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.05); z-index: 100;
        }
        .nav-item { font-size: 11px; cursor: pointer; opacity: 0.6; display: flex; flex-direction: column; align-items: center; color: var(--text); transition: 0.3s; }
        .nav-item.active { opacity: 1; color: var(--primary); font-weight: 700; transform: translateY(-3px); }
        .nav-icon { font-size: 22px; margin-bottom: 4px; }

        /* --- Page Specific Styles --- */
        .card-section { background: var(--card); padding: 25px; border-radius: 25px; box-shadow: var(--shadow); text-align: center; border: 1px solid rgba(0,0,0,0.05); }
        .section-title { color: var(--primary); font-size: 22px; font-weight: 700; margin-bottom: 25px; }
        
        .contact-btn { 
            display: flex; align-items: center; padding: 15px; background: var(--bg); border-radius: 18px; 
            margin-bottom: 15px; text-decoration: none; color: var(--text); font-weight: 600; 
            border: 2px solid transparent; transition: 0.3s; text-align: left;
        }
        .dark-mode .contact-btn { background: #2a2a2a; }
        .contact-btn:hover { border-color: var(--primary); background: var(--card); }
        .contact-btn img { width: 32px; height: 32px; margin-right: 15px; flex-shrink: 0; }
        .contact-text { display: flex; flex-direction: column; justify-content: center; overflow: hidden; }

        .bank-details { 
            background: #fffcf0; padding: 25px; border-radius: 20px; text-align: center; margin: 25px 0; 
            border: 2px dashed var(--secondary); position: relative;
        }
        .dark-mode .bank-details { background: #2c251a; border-color: #d35400; }

        .hidden { display: none; }
        input, textarea { width: 100%; padding: 15px; border-radius: 15px; border: 2px solid #eee; margin: 10px 0; background: var(--bg); color: var(--text); outline: none; transition: 0.3s; }
        input:focus, textarea:focus { border-color: var(--primary); }
    </style>
</head>
<body oncontextmenu="return false;">

<div class="header">
    <div class="header-left">
        <img src="https://cdn-icons-png.flaticon.com/512/11637/11637866.png" class="lotus-icon" alt="Lotus">
        <div class="app-title">‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂±‡∑ö‡∂≠‡∑ä‚Äç‡∂ª‡∑è</div>
    </div>
    <div class="header-icons">
        <span onclick="toggleDarkMode()">üåô</span>
        <span>üîî</span>
    </div>
</div>
<div class="date-strip">
    <span id="clock">00:00:00</span> | <span id="date">‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ö...</span>
</div>

<div class="container" id="main-content">
    <div id="page-home">
        <div id="article-list">
            <p style="text-align:center; padding: 50px; opacity: 0.6;">‡∑É‡∂Ø‡∑ä‡∂∞‡∂ª‡∑ä‡∂∏‡∂∫ ‡∂¥‡∑ñ‡∂ª‡∂´‡∂∫ ‡∑Ä‡∑ô‡∂∏‡∑í‡∂±‡∑ä ‡∂¥‡∑Ä‡∂≠‡∑ì...</p>
        </div>
    </div>

    <div id="page-reader" class="hidden">
        <button class="btn btn-dark" style="margin-bottom: 15px;" onclick="showPage('page-home')">‚¨ÖÔ∏è ‡∂Ü‡∂¥‡∑É‡∑î</button>
        <div class="card-section" style="text-align: left;">
            <h2 id="view-title" class="title" style="font-size: 22px; margin-top: 0;"></h2>
            <div style="height: 3px; width: 60px; background: var(--secondary); margin: 15px 0; border-radius: 5px;"></div>
            <div id="view-content" style="line-height:1.9; text-align:justify; font-size:18px; margin-top: 20px;"></div>
            
            <div style="margin-top:30px; border-top:1px solid #eee; padding-top:25px; text-align:center;">
                <p style="font-size: 13px; opacity: 0.7; margin-bottom: 15px;">‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥ ‡∑Ä‡∑í‡∂∏‡∑É‡∂±‡∑ä‡∂±:</p>
                <button class="btn btn-wa" onclick="contactWA()">üí¨ WhatsApp</button>
                <button class="btn btn-danger" onclick="contactMail()">üìß Email</button>
                <div style="margin-top: 20px;">
                    <button class="btn btn-dark" onclick="changeSize(2)">A+</button>
                    <button class="btn btn-dark" onclick="changeSize(-2)">A-</button>
                    <button id="speak-btn" class="btn" style="background: var(--accent);" onclick="readArt()">üîä ‡∑Å‡∑ä‚Äç‡∂ª‡∑Ä‡∂´‡∂∫</button>
                    <button id="stop-btn" class="btn btn-danger hidden" onclick="stopArt()">üõë ‡∂±‡∑Ä‡∂≠‡∑ä‡∑Ä‡∂±‡∑ä‡∂±</button>
                </div>
            </div>
            <div style="display:flex; justify-content: space-between; margin-top:25px;">
                <button class="btn btn-dark" onclick="nav(-1)">‚¨ÖÔ∏è ‡∂¥‡∑ô‡∂ª</button>
                <button class="btn btn-dark" onclick="nav(1)">‡∂∏‡∑ì‡∑Ö‡∂ü ‚û°Ô∏è</button>
            </div>
        </div>
    </div>

    <div id="page-about" class="hidden">
        <div class="card-section">
            <h2 class="section-title">‡∂Ö‡∂¥ ‡∂ú‡∑ê‡∂±</h2>
            <img src="https://cdn-icons-png.flaticon.com/512/2913/2913564.png" width="70" style="margin-bottom: 20px; filter: drop-shadow(0 4px 8px rgba(0,0,0,0.1));" alt="Dharma Chakra">
            <h3 style="color: var(--primary); margin-bottom: 5px;">‡∂¥‡∑ñ‡∂¢‡∑ä‚Äç‡∂∫‡∂¥‡∑è‡∂Ø ‡∂Ö‡∂Ç‡∑Ñ‡∑ô‡∂ß‡∑ä‡∂ß‡∑í‡∂ú‡∂∏ ‡∑É‡∑î‡∂ú‡∂≠‡∂±‡∂±‡∑ä‡∂Ø ‡∑É‡∑ä‡∑Ä‡∑è‡∂∏‡∑ì‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö</h3>
            <p style="opacity: 0.7; font-weight: 600; margin-top: 0;">(‡∂Ö‡∂Ç‡∑Ñ‡∑ô‡∂ß‡∑ä‡∂ß‡∑í‡∂ú‡∂∏ ‡∂¥‡∑ú‡∂©‡∑í ‡∑Ñ‡∑è‡∂∏‡∑î‡∂Ø‡∑î‡∂ª‡∑î‡∑Ä‡∑ù)</p>
            <p style="text-align: justify; margin-top: 25px; line-height: 1.7;">
                ‡∂∏‡∑ô‡∂∏ ‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂Ö‡∑Ä‡∂ö‡∑è‡∑Å‡∂∫‡∑ö ‡∂±‡∑í‡∂ª‡∑ä‡∂∏‡∑è‡∂≠‡∑ò‡∑Ä‡∂ª‡∂∫‡∑è‡∂´‡∑ù ‡∂¥‡∑ñ‡∂¢‡∑ä‚Äç‡∂∫‡∂¥‡∑è‡∂Ø ‡∂Ö‡∂Ç‡∑Ñ‡∑ô‡∂ß‡∑ä‡∂ß‡∑í‡∂ú‡∂∏ ‡∑É‡∑î‡∂ú‡∂≠‡∂±‡∂±‡∑ä‡∂Ø ‡∑É‡∑ä‡∑Ä‡∑è‡∂∏‡∑ì‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö ‡∑Ä‡∑ô‡∂≠‡∑í. ‡∂ã‡∂±‡∑ä‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö ‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∑É‡∂Ø‡∑ä‡∂∞‡∂ª‡∑ä‡∂∏‡∂∫ ‡∂Ω‡∑ù‡∂ö‡∂∫‡∑è ‡∑Ä‡∑ô‡∂≠ ‡∂ú‡∑ô‡∂± ‡∂∫‡∑è‡∂∏ ‡∂ã‡∂Ø‡∑ô‡∑É‡∑è ‡∂ö‡∑ê‡∂¥‡∑Ä‡∑ñ ‡∂∫‡∂≠‡∑í‡∑Ä‡∂ª‡∂∫‡∑è‡∂´‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö ‡∂±‡∂∏‡∂ö‡∑í. ‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂¥‡∑í‡∂ß‡∂ö ‡∂∞‡∂ª‡∑ä‡∂∏‡∂∫ ‡∑Ñ‡∑è ‡∂¥‡∑ä‚Äç‡∂ª‡∑è‡∂†‡∑ì‡∂± ‡∂∑‡∑è‡∑Ç‡∑è ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥‡∑Ä ‡∂∏‡∑ô‡∂±‡∑ä‡∂∏ ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î ‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´‡∑Ä‡∑ö‡∂Ø‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥ ‡∂©‡∑í‡∂¥‡∑ä‡∂Ω‡∑ù‡∂∏‡∑è (Diploma in IT) ‡∂Ø‡∑ê‡∂±‡∑î‡∂∏‡∑ô‡∂±‡∑ä ‡∂Ø ‡∑É‡∂±‡∑ä‡∂±‡∂Ø‡∑ä‡∂∞ ‡∂ã‡∂±‡∑ä‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö, ‡∂ë‡∂∏ ‡∂Ø‡∑ê‡∂±‡∑î‡∂∏ ‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∂†‡∑è‡∂ª‡∂ö ‡∂ö‡∂ß‡∂∫‡∑î‡∂≠‡∑î ‡∑Ä‡∂©‡∑è‡∂≠‡∑ä ‡∂±‡∑Ä‡∑ì‡∂± ‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´‡∂∫‡∂ß ‡∂Ö‡∂±‡∑î‡∂ö‡∑ñ‡∂Ω‡∑Ä ‡∑É‡∑í‡∂Ø‡∑î ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂ã‡∂¥‡∂∫‡∑ù‡∂ú‡∑ì ‡∂ö‡∂ª ‡∂ú‡∂±‡∑í‡∂≠‡∑í.
            </p>
        </div>
    </div>

    <div id="page-contact" class="hidden">
        <div class="card-section">
            <h2 class="section-title">‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±</h2>
            <p style="margin-bottom: 25px; opacity: 0.8;">‡∂ú‡∑û‡∂ª‡∑Ä‡∂±‡∑ì‡∂∫ ‡∑É‡∑ä‡∑Ä‡∑è‡∂∏‡∑ì‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É‡∑ö ‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∂ö‡∂ª ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∂ß:</p>
            
            <a href="https://wa.me/94778803779" class="contact-btn" style="border-color: #25D366;">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WA">
                <div class="contact-text">
                    <div style="font-size: 15px; color: #25D366; font-weight: 700;">WhatsApp (‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂© ‡∂¥‡∂∏‡∂´‡∑í)</div>
                    <div style="font-size: 17px;">+94 77 880 3779</div>
                </div>
            </a>
            <p style="color: var(--danger); font-size: 13px; font-weight: 700; margin: -10px 0 20px 0;">‚ö†Ô∏è ‡∂á‡∂∏‡∂≠‡∑î‡∂∏‡∑ä ‡∂ú‡∑ê‡∂±‡∑ì‡∂∏‡∑ô‡∂±‡∑ä ‡∑Ä‡∑Ö‡∂ö‡∑í‡∂±‡∑ä‡∂±.</p>
            
            <a href="mailto:anhettigamapodihamuduruwo@gmail.com" class="contact-btn" style="border-color: #e74c3c;">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="32" height="32"><path fill="#e74c3c" d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                <div class="contact-text" style="overflow: hidden;">
                    <div style="font-size: 15px; color: #e74c3c; font-weight: 700;">Email</div>
                    <div style="font-size: 14px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">anhettigamapodihamuduruwo@gmail.com</div>
                </div>
            </a>

            <p style="margin-top: 35px; margin-bottom: 15px; opacity: 0.8;">‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´‡∑í‡∂ö ‡∑É‡∑Ñ‡∑è‡∂∫ (GMU STUDIO):</p>
            <a href="https://wa.me/94763861339" class="contact-btn" style="border-color: var(--accent);">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WA">
                <div class="contact-text">
                    <div style="font-size: 15px; color: var(--accent); font-weight: 700;">WhatsApp (‡∂≠‡∑è‡∂ö‡∑ä‡∑Ç‡∂´‡∑í‡∂ö)</div>
                    <div style="font-size: 17px;">+94 76 386 1339</div>
                </div>
            </a>
        </div>
    </div>

    <div id="page-donate" class="hidden">
        <div class="card-section">
            <h2 class="section-title">‡∂¥‡∑í‡∂Ç‡∂ö‡∂∏‡∂ß ‡∂Ø‡∑è‡∂∫‡∂ö ‡∑Ä‡∂±‡∑ä‡∂±</h2>
            <p style="line-height: 1.6; margin-bottom: 25px; font-size: 15px;">
                ‡∂∏‡∑ô‡∂∏ ‡∂ã‡∂≠‡∑î‡∂∏‡∑ä ‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∂†‡∑è‡∂ª‡∂ö ‡∑É‡∑ö‡∑Ä‡∑è‡∑Ä ‡∂Ö‡∂õ‡∂´‡∑ä‡∂©‡∑Ä ‡∂¥‡∑Ä‡∂≠‡∑ä‡∑Ä‡∑è‡∂ú‡∑ô‡∂± ‡∂∫‡∑è‡∂∏ ‡∂ã‡∂Ø‡∑ô‡∑É‡∑è ‡∂î‡∂∂ ‡∂Ω‡∂∂‡∑è ‡∂Ø‡∑ô‡∂± ‡∑É‡∑Ñ‡∂∫‡∑ù‡∂ú‡∂∫ ‡∂ã‡∂≠‡∑î‡∂∏‡∑ä ‡∂∞‡∂ª‡∑ä‡∂∏ ‡∂Ø‡∑è‡∂±‡∂∫‡∂ö‡∑í.
            </p>
            
            <div class="bank-details">
                <h3 style="text-align: center; color: var(--primary); margin-top: 0; display: flex; align-items: center; justify-content: center;"><span style="margin-right: 10px;">üèõÔ∏è</span> ‡∂∂‡∑ê‡∂Ç‡∂ö‡∑î ‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∑ä ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª</h3>
                <div style="display: inline-block; text-align: left; margin-top: 15px; line-height: 1.8; font-size: 15px;">
                    <p><b>‡∂∂‡∑ê‡∂Ç‡∂ö‡∑î‡∑Ä:</b> ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂∂‡∑ê‡∂Ç‡∂ö‡∑î‡∑Ä (BOC)</p>
                    <p><b>‡∑Å‡∑è‡∂õ‡∑è‡∑Ä:</b> ‡∂ö‡∑í‡∂ª‡∑í‡∂á‡∂Ω‡∑ä‡∂Ω (Kiriella)</p>
                    <p><b>‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∑ä ‡∂Ö‡∂Ç‡∂ö‡∂∫:</b> <span style="font-size: 20px; color: var(--primary); font-weight: 800;">89862879</span></p>
                    <p><b>‡∂ú‡∑í‡∂´‡∑î‡∂∏‡∑ä ‡∑Ñ‡∑í‡∂∏‡∑í‡∂∫‡∑è:</b> A Udara Sandaruwan</p>
                </div>
            </div>

            <button class="btn btn-wa" style="width: 100%; padding: 15px; font-size: 16px; display: flex; align-items: center; justify-content: center;" onclick="window.open('https://wa.me/94763861339?text=Donation Receipt')">
                <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" width="24" style="margin-right: 10px;">
                ‡∂ª‡∑í‡∑É‡∑í‡∂ß‡∑ä‡∂¥‡∂≠ ‡∂ë‡∑Ä‡∂±‡∑ä‡∂± (076 386 1339)
            </button>
        </div>
    </div>
    
    <div id="page-merit" class="hidden">
        <div class="card-section" style="text-align: left;">
            <h2 class="title" style="justify-content: center;">üìñ ‡∂¥‡∑í‡∂Ç ‡∂¥‡∑ú‡∂≠</h2>
            <input type="date" id="merit-date">
            <textarea id="merit-text" rows="3" placeholder="‡∂Ö‡∂Ø ‡∂ö‡∑Ö ‡∂ã‡∂≠‡∑î‡∂∏‡∑ä ‡∂¥‡∑í‡∂±‡∑ä‡∂ö‡∂∏..."></textarea>
            <button class="btn" style="width:100%; font-size: 16px;" onclick="addMerit()">‡∑É‡∂ß‡∑Ñ‡∂±‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
        </div>
        <div id="merit-list"></div>
    </div>

    <div id="page-meditation" class="hidden">
         <div class="card-section">
            <h2 class="title" style="justify-content: center;">üßò ‡∂∑‡∑è‡∑Ä‡∂±‡∑è ‡∂ö‡∑è‡∂Ω ‡∂ú‡∂´‡∂ö‡∂∫</h2>
            <div id="timer-display" style="font-size: 70px; color: var(--primary); margin: 40px 0; font-weight: 700; font-family: monospace;">10:00</div>
            <button class="btn" style="padding: 15px 50px; font-size: 18px;" onclick="startTimer()">‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑‡∂∫</button>
            <br><br>
            <button class="btn btn-dark" onclick="resetTimer()">‡∂±‡∑ê‡∑Ä‡∂≠ ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±</button>
        </div>
    </div>

</div>

<div class="bottom-nav">
    <div class="nav-item active" onclick="showPage('page-home', this)"><span class="nav-icon">üè†</span>‡∂∏‡∑î‡∂Ω‡∑ä ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä</div>
    <div class="nav-item" onclick="showPage('page-about', this)"><span class="nav-icon">‚ÑπÔ∏è</span>‡∂Ö‡∂¥ ‡∂ú‡∑ê‡∂±</div>
    <div class="nav-item" onclick="showPage('page-contact', this)"><span class="nav-icon">üìû</span>‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞</div>
    <div class="nav-item" onclick="showPage('page-donate', this)"><span class="nav-icon">üôè</span>‡∂Ü‡∂∞‡∑è‡∂ª</div>
    <div class="nav-item" onclick="showPage('page-merit', this)"><span class="nav-icon">üìñ</span>‡∂¥‡∑í‡∂Ç ‡∂¥‡∑ú‡∂≠</div>
    <div class="nav-item" onclick="showPage('page-meditation', this)"><span class="nav-icon">üßò</span>‡∂∑‡∑è‡∑Ä‡∂±‡∑è</div>
</div>

<audio id="bell" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>

<script>
    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyDEiwhtAIdoqdMIV5n_bdDoKuIrCkjqr3M",
        authDomain: "dharma-nethra.firebaseapp.com",
        projectId: "dharma-nethra",
        storageBucket: "dharma-nethra.firebasestorage.app",
        messagingSenderId: "365410669829",
        appId: "1:365410669829:web:d9a9465ed1f1f2b792936c"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    let articles = []; let curIdx = 0;
    let reads = JSON.parse(localStorage.getItem('r')) || [];
    let merits = JSON.parse(localStorage.getItem('m')) || [];
    let fs = 18;

    function tick() {
        const n = new Date();
        document.getElementById('clock').innerText = n.toLocaleTimeString('si-LK');
        document.getElementById('date').innerText = n.toLocaleDateString('si-LK', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    } setInterval(tick, 1000);

    async function load() {
        const s = await db.collection("articles").get();
        articles = s.docs.map(doc => doc.data());
        render(articles);
    }

    function render(data) {
        const list = document.getElementById('article-list');
        list.innerHTML = data.map((a, i) => `
            <div class="article-card" onclick="openArt(${i})">
                ${reads.includes(a.id) ? '<span class="read-badge">‚úÖ ‡∂ö‡∑í‡∂∫‡∑Ä‡∂± ‡∂Ω‡∂Ø‡∑ì</span>' : ''}
                <div class="title">${a.title}</div>
                <p class="snippet">${a.snippet}</p>
            </div>
        `).join('');
    }

    function openArt(i) {
        curIdx = i; const a = articles[i];
        if(!reads.includes(a.id)) { reads.push(a.id); localStorage.setItem('r', JSON.stringify(reads)); }
        showPage('page-reader');
        document.getElementById('view-title').innerText = a.title;
        document.getElementById('view-content').innerText = a.content;
        stopArt();
    }

    function showPage(id, el) {
        const ps = ['page-home', 'page-reader', 'page-about', 'page-contact', 'page-donate', 'page-merit', 'page-meditation'];
        ps.forEach(p => document.getElementById(p).classList.add('hidden'));
        if(el) { document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active')); el.classList.add('active'); }
        document.getElementById(id).classList.remove('hidden');
        if(id === 'page-home') render(articles);
        if(id === 'page-merit') drawMerits();
        window.scrollTo(0,0);
        stopArt();
    }

    function contactWA() { const t = articles[curIdx].title; window.open(`https://wa.me/94778803779?text=${encodeURIComponent(`‡∂ú‡∑û‡∂ª‡∑Ä‡∂±‡∑ì‡∂∫ ‡∑É‡∑ä‡∑Ä‡∑è‡∂∏‡∑í‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É, '${t}' ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥‡∑Ä‡∂∫‡∑í:\n\n`)}`); }
    function contactMail() { const t = articles[curIdx].title; window.location.href = `mailto:anhettigamapodihamuduruwo@gmail.com?subject=‡∑Ä‡∑í‡∂∏‡∑É‡∑ì‡∂∏&body=${encodeURIComponent(`‡∂ú‡∑û‡∂ª‡∑Ä‡∂±‡∑ì‡∂∫ ‡∑É‡∑ä‡∑Ä‡∑è‡∂∏‡∑í‡∂±‡∑ä ‡∑Ä‡∑Ñ‡∂±‡∑ä‡∑É, '${t}' ‡∂Ω‡∑í‡∂¥‡∑í‡∂∫ ‡∂¥‡∑í‡∑Ö‡∑í‡∂∂‡∂≥‡∑Ä‡∂∫‡∑í:\n\n`)}`; }
    function toggleDarkMode() { document.body.classList.toggle('dark-mode'); }
    function changeSize(v) { fs += v; document.getElementById('view-content').style.fontSize = fs + 'px'; }
    
    function readArt() {
        window.speechSynthesis.cancel();
        let u = new SpeechSynthesisUtterance(document.getElementById('view-content').innerText);
        u.lang='si-LK';
        u.onstart = () => { document.getElementById('speak-btn').classList.add('hidden'); document.getElementById('stop-btn').classList.remove('hidden'); };
        u.onend = () => { stopArt(); };
        window.speechSynthesis.speak(u);
    }
    function stopArt() {
        window.speechSynthesis.cancel();
        document.getElementById('speak-btn').classList.remove('hidden');
        document.getElementById('stop-btn').classList.add('hidden');
    }
    
    function nav(v) { let n = curIdx + v; if(n >= 0 && n < articles.length) openArt(n); }

    function addMerit() {
        const d = document.getElementById('merit-date').value; const t = document.getElementById('merit-text').value;
        if(d && t) { merits.unshift({ d, t, id: Date.now() }); localStorage.setItem('m', JSON.stringify(merits)); drawMerits(); document.getElementById('merit-text').value = ""; }
    }
    function drawMerits() {
        document.getElementById('merit-list').innerHTML = merits.map(m => `
            <div class="article-card" style="border-left: 5px solid var(--secondary);">
                <div style="font-weight:700; color:var(--primary);">${m.d}</div>
                <p style="margin:5px 0; font-size: 16px;">${m.t}</p>
                <span style="position:absolute; right:20px; top:20px; cursor:pointer; color: var(--danger);" onclick="delMerit(${m.id})">üóëÔ∏è</span>
            </div>
        `).join('');
    }
    function delMerit(id) { merits = merits.filter(x => x.id !== id); localStorage.setItem('m', JSON.stringify(merits)); drawMerits(); }

    let t_int;
    function startTimer() {
        let s = 600; clearInterval(t_int);
        t_int = setInterval(() => { s--; let m=Math.floor(s/60), sec=s%60; document.getElementById('timer-display').innerText = `${m}:${sec < 10 ? '0'+sec : sec}`; if(s <= 0) { clearInterval(t_int); document.getElementById('bell').play(); alert("‡∂∑‡∑è‡∑Ä‡∂±‡∑è ‡∂ö‡∑è‡∂Ω‡∂∫ ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä!"); } }, 1000);
    }
    function resetTimer() { clearInterval(t_int); document.getElementById('timer-display').innerText = "10:00"; }

    window.onload = () => { tick(); load(); document.getElementById('merit-date').valueAsDate = new Date(); };
</script>
</body>
</html>